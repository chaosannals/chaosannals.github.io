import{d as _,y as v,r as y,z as c,a as m,b as w,e as g,h as l,A as x,B as I,w as V,g as p,C as b}from"./index-2de462e8.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const T={class:"toolkit-image-craft-page"},U={class:"setting-bar"},k={class:"preview-box"},H=_({__name:"ImageCraftPage",setup(W){const u=[{value:1,text:"png",mime:"image/png",suffix:"png"},{value:2,text:"jpg",mime:"image/jpeg",suffix:"jpg",quality:.9},{value:3,text:"webp",mime:"image/webp",suffix:"webp",quality:.9}],r=v(),e=y({targetType:u[0],targetWidth:0,targetHeight:0}),d=()=>{r.value.width=e.targetWidth,r.value.height=e.targetHeight;const o=r.value.getContext("2d"),t=e.sourceImage;o==null||o.drawImage(t,0,0,t.width,t.height,0,0,e.targetWidth,e.targetHeight)};c(()=>e.targetWidth,o=>{if(e.sourceImage){const t=e.sourceImage.width/e.sourceImage.height;e.targetHeight=o/t,d()}}),c(()=>e.targetHeight,o=>{if(e.sourceImage){const t=e.sourceImage.width/e.sourceImage.height;e.targetWidth=o*t,d()}});const h=o=>{const t=o.target.files[0],i=URL.createObjectURL(t),a=new Image;a.onload=()=>{URL.revokeObjectURL(i),e.sourceImage=a,e.targetWidth=a.width,e.targetHeight=a.height,r.value.width=a.width,r.value.height=a.height;const s=r.value.getContext("2d");s==null||s.drawImage(a,0,0,a.width,a.height)},a.src=i},f=()=>{r.value.toBlob(o=>{const t=URL.createObjectURL(o),i=document.createElement("a");i.href=t,i.download=`download.${e.targetType.suffix}`,i.click()},e.targetType.mime,e.targetType.quality)};return(o,t)=>{const i=m("form-text-select"),a=m("form-number-input"),s=m("form-text-button");return p(),w("div",T,[g("div",U,[g("input",{type:"file",onInput:h},null,32),l(i,{modelValue:e.targetType,"onUpdate:modelValue":t[0]||(t[0]=n=>e.targetType=n),options:u},null,8,["modelValue"]),l(a,{modelValue:e.targetWidth,"onUpdate:modelValue":t[1]||(t[1]=n=>e.targetWidth=n)},null,8,["modelValue"]),l(a,{modelValue:e.targetHeight,"onUpdate:modelValue":t[2]||(t[2]=n=>e.targetHeight=n)},null,8,["modelValue"]),e.targetType.quality!=null?(p(),x(a,{key:0,modelValue:e.targetType.quality,"onUpdate:modelValue":t[3]||(t[3]=n=>e.targetType.quality=n)},null,8,["modelValue"])):I("",!0),l(s,{onClick:f},{default:V(()=>[b("保存")]),_:1})]),g("div",k,[g("canvas",{ref_key:"$canvas",ref:r},null,512)])])}}});const B=C(H,[["__scopeId","data-v-f93f06ca"]]);export{B as default};
