import{ae as C,d as P,x as y,aZ as fe,aD as ne,a6 as p,i as n,al as T,ah as Y,aX as H,aY as M,aJ as G,m as R,ao as te,a5 as k,a7 as ge,V as j,a_ as ae,av as J,z as me,ag as ve,am as E,au as be,s as he,aR as D,aj as z,a1 as O,aA as _e,ab as xe,ap as oe,an as U,n as Be,a$ as Se,F as K,a0 as I,aQ as re,aC as ye,b0 as Pe,af as $e,aG as X,aE as ke,b1 as Ce,b2 as Te,b as F,c as Z,e as w,w as v,h as we,b3 as Ie,O as Le,t as V,_ as Ae}from"./index-240e0f97.js";import{B as ie,L as pe}from"./index-b7c4962e.js";const[ce,q]=C("action-bar"),Q=Symbol(ce),Ee={placeholder:Boolean,safeAreaInsetBottom:p};var Ve=P({name:ce,props:Ee,setup(e,{slots:t}){const r=y(),l=fe(r,q),{linkChildren:i}=ne(Q);i();const s=()=>{var o;return n("div",{ref:r,class:[q(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(o=t.default)==null?void 0:o.call(t)])};return()=>e.placeholder?l(s):s()}});const ze=T(Ve),[Re,je]=C("action-bar-button"),De=Y({},H,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Fe=P({name:Re,props:De,setup(e,{slots:t}){const r=M(),{parent:l,index:i}=G(Q),s=R(()=>{if(l){const d=l.children[i.value-1];return!(d&&"isButton"in d)}}),o=R(()=>{if(l){const d=l.children[i.value+1];return!(d&&"isButton"in d)}});return te({isButton:!0}),()=>{const{type:d,icon:f,text:c,color:g,loading:m,disabled:b}=e;return n(ie,{class:je([d,{last:o.value,first:s.value}]),size:"large",type:d,icon:f,color:g,loading:m,disabled:b,onClick:r},{default:()=>[t.default?t.default():c]})}}});const Ne=T(Fe),[Oe,N]=C("action-bar-icon"),Ue=Y({},H,{dot:Boolean,text:String,icon:String,color:String,badge:k,iconClass:ge,badgeProps:Object,iconPrefix:String});var Ke=P({name:Oe,props:Ue,setup(e,{slots:t}){const r=M();G(Q);const l=()=>{const{dot:i,badge:s,icon:o,color:d,iconClass:f,badgeProps:c,iconPrefix:g}=e;return t.icon?n(ae,j({dot:i,class:N("icon"),content:s},c),{default:t.icon}):n(J,{tag:"div",dot:i,name:o,badge:s,color:d,class:[N("icon"),f],badgeProps:c,classPrefix:g},null)};return()=>n("div",{role:"button",class:N(),tabindex:0,onClick:r},[l(),t.default?t.default():e.text])}});const Ye=T(Ke),He=Symbol(),Me=()=>me(He,null),[Ge,W]=C("tag"),Je={size:String,mark:Boolean,show:p,type:E("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var Qe=P({name:Ge,props:Je,emits:["close"],setup(e,{slots:t,emit:r}){const l=o=>{o.stopPropagation(),r("close",o)},i=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},s=()=>{var o;const{type:d,mark:f,plain:c,round:g,size:m,closeable:b}=e,x={mark:f,plain:c,round:g};m&&(x[m]=m);const u=b&&n(J,{name:"cross",class:[W("close"),be],onClick:l},null);return n("span",{style:i(),class:W([x,d])},[(o=t.default)==null?void 0:o.call(t),u])};return()=>n(ve,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?s():null]})}});const le=T(Qe),[Xe,L]=C("image"),Ze={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:k,height:k,radius:k,lazyLoad:Boolean,iconSize:k,showError:p,errorIcon:E("photo-fail"),iconPrefix:String,showLoading:p,loadingIcon:E("photo"),crossorigin:String,referrerpolicy:String};var qe=P({name:Xe,props:Ze,emits:["load","error"],setup(e,{emit:t,slots:r}){const l=y(!1),i=y(!0),s=y(),{$Lazyload:o}=he().proxy,d=R(()=>{const a={width:D(e.width),height:D(e.height)};return z(e.radius)&&(a.overflow="hidden",a.borderRadius=D(e.radius)),a});O(()=>e.src,()=>{l.value=!1,i.value=!0});const f=a=>{i.value&&(i.value=!1,t("load",a))},c=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:s.value,enumerable:!0}),f(a)},g=a=>{l.value=!0,i.value=!1,t("error",a)},m=(a,_,$)=>$?$():n(J,{name:a,size:e.iconSize,class:_,classPrefix:e.iconPrefix},null),b=()=>{if(i.value&&e.showLoading)return n("div",{class:L("loading")},[m(e.loadingIcon,L("loading-icon"),r.loading)]);if(l.value&&e.showError)return n("div",{class:L("error")},[m(e.errorIcon,L("error-icon"),r.error)])},x=()=>{if(l.value||!e.src)return;const a={alt:e.alt,class:L("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?Be(n("img",j({ref:s},a),null),[[Se("lazy"),e.src]]):n("img",j({ref:s,src:e.src,onLoad:f,onError:g},a),null)},u=({el:a})=>{const _=()=>{a===s.value&&i.value&&c()};s.value?_():U(_)},B=({el:a})=>{a===s.value&&!l.value&&g()};return o&&_e&&(o.$on("loaded",u),o.$on("error",B),xe(()=>{o.$off("loaded",u),o.$off("error",B)})),oe(()=>{U(()=>{var a;(a=s.value)!=null&&a.complete&&!e.lazyLoad&&c()})}),()=>{var a;return n("div",{class:L({round:e.round,block:e.block}),style:d.value},[x(),b(),(a=r.default)==null?void 0:a.call(r)])}}});const We=T(qe),[en,h]=C("card"),nn={tag:String,num:k,desc:String,thumb:String,title:String,price:k,centered:Boolean,lazyLoad:Boolean,currency:E("¥"),thumbLink:String,originPrice:k};var tn=P({name:en,props:nn,emits:["clickThumb"],setup(e,{slots:t,emit:r}){const l=()=>{if(t.title)return t.title();if(e.title)return n("div",{class:[h("title"),"van-multi-ellipsis--l2"]},[e.title])},i=()=>{if(t.tag||e.tag)return n("div",{class:h("tag")},[t.tag?t.tag():n(le,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},s=()=>t.thumb?t.thumb():n(We,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),o=()=>{if(t.thumb||e.thumb)return n("a",{href:e.thumbLink,class:h("thumb"),onClick:c=>r("clickThumb",c)},[s(),i()])},d=()=>{if(t.desc)return t.desc();if(e.desc)return n("div",{class:[h("desc"),"van-ellipsis"]},[e.desc])},f=()=>{const c=e.price.toString().split(".");return n("div",null,[n("span",{class:h("price-currency")},[e.currency]),n("span",{class:h("price-integer")},[c[0]]),c.length>1&&n(K,null,[I("."),n("span",{class:h("price-decimal")},[c[1]])])])};return()=>{var c,g,m;const b=t.num||z(e.num),x=t.price||z(e.price),u=t["origin-price"]||z(e.originPrice),B=b||x||u||t.bottom,a=x&&n("div",{class:h("price")},[t.price?t.price():f()]),_=u&&n("div",{class:h("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),$=b&&n("div",{class:h("num")},[t.num?t.num():`x${e.num}`]),S=t.footer&&n("div",{class:h("footer")},[t.footer()]),ue=B&&n("div",{class:h("bottom")},[(c=t["price-top"])==null?void 0:c.call(t),a,_,$,(g=t.bottom)==null?void 0:g.call(t)]);return n("div",{class:h()},[n("div",{class:h("header")},[o(),n("div",{class:h("content",{centered:e.centered})},[n("div",null,[l(),d(),(m=t.tags)==null?void 0:m.call(t)]),ue])]),S])}}});const an=T(tn),[on,A,rn]=C("list"),cn={error:Boolean,offset:re(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:E("down"),loadingText:String,finishedText:String,immediateCheck:p};var ln=P({name:on,props:cn,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:r}){const l=y(e.loading),i=y(),s=y(),o=Me(),d=ye(i),f=R(()=>e.scroller||d.value),c=()=>{U(()=>{if(l.value||e.finished||e.disabled||e.error||(o==null?void 0:o.value)===!1)return;const{direction:u}=e,B=+e.offset,a=X(f);if(!a.height||ke(i))return;let _=!1;const $=X(s);u==="up"?_=a.top-$.top<=B:_=$.bottom-a.bottom<=B,_&&(l.value=!0,t("update:loading",!0),t("load"))})},g=()=>{if(e.finished){const u=r.finished?r.finished():e.finishedText;if(u)return n("div",{class:A("finished-text")},[u])}},m=()=>{t("update:error",!1),c()},b=()=>{if(e.error){const u=r.error?r.error():e.errorText;if(u)return n("div",{role:"button",class:A("error-text"),tabindex:0,onClick:m},[u])}},x=()=>{if(l.value&&!e.finished&&!e.disabled)return n("div",{class:A("loading")},[r.loading?r.loading():n(pe,{class:A("loading-icon")},{default:()=>[e.loadingText||rn("loading")]})])};return O(()=>[e.loading,e.finished,e.error],c),o&&O(o,u=>{u&&c()}),Pe(()=>{l.value=e.loading}),oe(()=>{e.immediateCheck&&c()}),te({check:c}),$e("scroll",c,{target:f,passive:!0}),()=>{var u;const B=(u=r.default)==null?void 0:u.call(r),a=n("div",{ref:s,class:A("placeholder")},null);return n("div",{ref:i,role:"feed",class:A(),"aria-busy":l.value},[e.direction==="down"?B:a,x(),g(),b(),e.direction==="up"?B:a])}}});const sn=T(ln),[se,dn]=C("sidebar"),de=Symbol(se),un={modelValue:re(0)};var fn=P({name:se,props:un,emits:["change","update:modelValue"],setup(e,{emit:t,slots:r}){const{linkChildren:l}=ne(de),i=()=>+e.modelValue;return l({getActive:i,setActive:o=>{o!==i()&&(t("update:modelValue",o),t("change",o))}}),()=>{var o;return n("div",{role:"tablist",class:dn()},[(o=r.default)==null?void 0:o.call(r)])}}});const gn=T(fn),[mn,ee]=C("sidebar-item"),vn=Y({},H,{dot:Boolean,title:String,badge:k,disabled:Boolean,badgeProps:Object});var bn=P({name:mn,props:vn,emits:["click"],setup(e,{emit:t,slots:r}){const l=M(),{parent:i,index:s}=G(de);if(!i)return;const o=()=>{e.disabled||(t("click",s.value),i.setActive(s.value),l())};return()=>{const{dot:d,badge:f,title:c,disabled:g}=e,m=s.value===i.getActive();return n("div",{role:"tab",class:ee({select:m,disabled:g}),tabindex:g?void 0:0,"aria-selected":m,onClick:o},[n(ae,j({dot:d,class:ee("text"),content:f},e.badgeProps),{default:()=>[r.title?r.title():c]})])}}});const hn=T(bn);const _n={class:"shop-list"},xn={class:"tag-column"},Bn={class:"tag-row"},Sn=P({__name:"IndexPage",setup(e){const t=y(0),r=y(!1),l=y(!1),i=y([]),s=Ce(),o=async()=>{await Ie(1e3);for(let f=0;f<10;f++)i.value.push(i.value.length+1);r.value=!1,i.value.length>=40&&(l.value=!0)},d=f=>{console.log("onSidebarChange",f)};return Te(()=>{s.isMdShowTabbar=!0}),(f,c)=>{const g=hn,m=gn,b=le,x=ie,u=an,B=sn,a=Ye,_=Ne,$=ze;return F(),Z(K,null,[w("div",_n,[n(m,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=S=>t.value=S),onChange:d},{default:v(()=>[n(g,{title:"标签名称",dot:""}),n(g,{title:"标签名称"}),n(g,{title:"标签名称"})]),_:1},8,["modelValue"]),n(B,{loading:r.value,"onUpdate:loading":c[1]||(c[1]=S=>r.value=S),finished:l.value,"finished-text":"没有更多了",onLoad:o},{default:v(()=>[(F(!0),Z(K,null,we(i.value,S=>(F(),Le(u,{key:S,thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"},{tag:v(()=>[w("div",xn,[n(b,{mark:"",type:"primary"},{default:v(()=>[I("标签")]),_:1}),n(b,{mark:"",type:"primary"},{default:v(()=>[I("标签2")]),_:1})])]),tags:v(()=>[w("div",Bn,[n(b,{plain:"",type:"primary"},{default:v(()=>[I("标签1")]),_:1}),n(b,{plain:""},{default:v(()=>[I("标签2")]),_:1})])]),title:v(()=>[w("span",null,"标题"+V(S),1)]),desc:v(()=>[w("p",null,[w("span",null,"商品描述 "+V(S),1)])]),price:v(()=>[w("span",null,"￥"+V(S.toFixed(2)),1)]),num:v(()=>[w("span",null,"x"+V(S),1)]),footer:v(()=>[n(x,{size:"mini"},{default:v(()=>[I("按钮")]),_:1}),n(x,{size:"mini"},{default:v(()=>[I("按钮")]),_:1})]),_:2},1024))),128))]),_:1},8,["loading","finished"])]),n($,null,{default:v(()=>[n(a,{icon:"chat-o",text:"客服",dot:""}),n(a,{icon:"cart-o",text:"购物车",badge:"5"}),n(_,{type:"warning",text:"加入购物车"}),n(_,{type:"danger",text:"立即购买"})]),_:1})],64)}}});const $n=Ae(Sn,[["__scopeId","data-v-8b308238"]]);export{$n as default};
